<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>org.bargsten.envinject</id>
    <name>EnvInject</name>
    <vendor>Joachim Bargsten</vendor>

    <description><![CDATA[
        Injects environment variables into JVM Run Configurations (Java, Kotlin, Scala)
        by executing an external command before launch. The command outputs <code>KEY=VALUE</code>
        lines to stdout, which get merged into the process environment.
        Configuration is per-project via a <code>.env-inject</code> file in the project root.

        This is useful for AI coding agents so they cannot upload your secrets that might linger as
        plain text in your project.
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>com.intellij.gradle</depends>

    <extensions defaultExtensionNs="com.intellij">
        <runConfigurationExtension implementation="org.bargsten.envinject.EnvInjectRunConfigurationExtension"/>
        <notificationGroup id="env-inject.info" displayType="NONE"/>
        <notificationGroup id="env-inject.warnings" displayType="BALLOON"/>
    </extensions>

    <projectListeners>
        <listener class="org.bargsten.envinject.EnvInjectExecutionListener"
                  topic="com.intellij.execution.ExecutionListener"/>
    </projectListeners>

</idea-plugin>
